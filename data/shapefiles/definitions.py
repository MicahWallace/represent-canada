# coding: utf-8
from datetime import date

from boundaryservice import utils

SHAPEFILES = {
# FEDERAL
    # This key should be the plural name of the boundaries in this set
    'Federal Electoral Districts': {
        # Path to a shapefile, relative to /data/shapefiles
        'file': 'fed/ed/',
        # Generic singular name for an boundary of from this set
        'singular': 'Federal Electoral District',
        # Should the singular name come first when creating canonical identifiers for this set?
        'kind_first': False,
        # Function which each feature wall be passed to in order to extract its "external_id" property
        # The utils module contains several generic functions for doing this
        'ider': utils.simple_namer(['FEDUID']),
        # Function which each feature will be passed to in order to extract its "name" property
        'namer': utils.simple_namer(['FEDNAME']),
        # Authority that is responsible for the accuracy of this data
        'authority': 'Her Majesty the Queen in Right of Canada',
        # Geographic extents which the boundary set encompasses
        'domain': 'Canada',
        # Last time the source was checked for new data
        'last_updated': date(2011, 11, 28),
        # A url to the source of the data
        'href': 'http://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/bound-limit-eng.cfm',
        # Notes identifying any pecularities about the data, such as columns that were deleted or files which were merged
        'notes': '',
        # Encoding of the text fields in the shapefile, i.e. 'utf-8'. If this is left empty 'ascii' is assumed
        'encoding': 'iso-8859-1',
        # SRID of the geometry data in the shapefile if it can not be inferred from an accompanying .prj file
        # This is normally not necessary and can be left undefined or set to an empty string to maintain the default behavior
        'srid': '',
        'licence': 'http://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/license-eng.cfm?lang=_e&year=11&type=fed000a&format=a',
        'data': 'http://www12.statcan.gc.ca/census-recensement/2011/geo/bound-limit/files-fichiers/gfed000a11a_e.zip',
    },
# PROVINCES
    'Alberta Electoral Districts': {
        'file': 'ab/ed/',
        'singular': 'Alberta Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['EDNUMBER']),
        'namer': utils.simple_namer(['EDNAME']),
        'authority': 'Government of Alberta',
        'domain': 'Alberta',
        'last_updated': date(2011, 11, 25),
        'href': 'http://www.altalis.com/prod_base_bound.html',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://www.altalis.com/agreement.html',
        'data': 'http://www.altalis.com/Samples/Provincial%20Electoral%20Divisions.zip',
    },
    'British Columbia Electoral Districts': {
        'file': 'bc/ed/',
        'singular': 'British Columbia Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['edabbr']),
        'namer': utils.simple_namer(['edname']),
        'authority': 'Elections BC',
        'domain': 'British Columbia',
        'last_updated': date(2011, 12, 12),
        'href': 'http://www.elections.bc.ca/index.php/voting/electoral-maps-profiles/geographic-information-system-spatial-data-files-2011/',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': '',
        'data': 'http://www.elections.bc.ca/docs/map/redis11/GIS/ED_Province.exe',
    },
    #'Manitoba Electoral Districts': {
    #    'file': 'mb/ed/',
    #    'singular': 'Manitoba Electoral District',
    #    'kind_first': False,
    #    'ider': utils.simple_namer(['']),
    #    'namer': utils.simple_namer(['']),
    #    'authority': '',
    #    'domain': 'Manitoba',
    #    'last_updated': date(, , ),
    #    'href': 'https://mli2.gov.mb.ca//adminbnd/index.html',
    #    'notes': "The shapefile has 54 features instead of 57.",
    #    'encoding': 'iso-8859-1',
    #    'srid': '',
    #    'licence': 'https://mli2.gov.mb.ca//app/register/app/index.php',
    #    'data': 'https://mli2.gov.mb.ca//adminbnd/shp_zip_files/provincial_electoral_districts_shp.zip',
    #},
    'Nova Scotia Electoral Districts': {
        'file': 'ns/ed/',
        'singular': 'Nova Scotia Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['DIST_NO']),
        'namer': utils.simple_namer(['DISTRICT']),
        'authority': 'Elections Nova Scotia',
        'domain': 'Nova Scotia',
        'last_updated': date(2011, 3, 29),
        'href': 'http://electionsnovascotia.ca/geoginfo.asp',
        'notes': 'Halifax Citadel-Sable Island (27) is split into two features. It is preferable to merge them (using Quantum GIS for example).',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': '',
        'data': 'http://electionsnovascotia.ca/geography/downloads/ProvincialDistricts.zip',
    },
    #'New Brunswick Electoral Districts': {
    #    'file': 'nb/ed/',
    #    'singular': 'New Brunswick Electoral District',
    #    'kind_first': False,
    #    'ider': utils.simple_namer(['KEYWORD']),
    #    'namer': utils.simple_namer(['ENG_NAME']),
    #    'authority': 'Office of the Chief Electoral Officer',
    #    'domain': 'New Brunswick',
    #    'last_updated': date(2005, 3, 1),
    #    'href': 'http://www.snb.ca/gdam-igec/e/2900e_1e_i.asp',
    #    'notes': 'The shapefile has 73 features instead of 55, because disjoint areas are split into #multiple features. The district names are in a separate text file.',
    #    'encoding': 'iso-8859-1',
    #    'srid': '',
    #    'licence': 'http://www.snb.ca/gdam-igec/e/2900e_1e_v.asp',
    #    'data': 'http://www.snb.ca/topo/aadb/shape/nbaa_5013_ranb.zip',
    #},
    'Newfoundland and Labrador Electoral Districts': {
        'file': 'nl/ed/',
        'singular': 'Newfoundland and Labrador Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['OBJECTID']),
        'namer': utils.simple_namer(['ELEC_DISTR']),
        'authority': 'Government of Newfoundland and Labrador',
        'domain': 'Newfoundland and Labrador',
        'last_updated': date(2011, 12, 13),
        'href': '',
        'notes': 'The shapefile also has the MLA name and party.',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'For this particular dataset, there are no restrictions on its use. (jwood@gov.nl.ca)',
        'data': '',
    },
    'Ontario Electoral Districts': {
        'file': 'on/ed/',
        'singular': 'Ontario Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['ED_ID']),
        'namer': utils.simple_namer(['ENGLISH_NA']),
        'authority': 'Government of Ontario',
        'domain': 'Ontario',
        'last_updated': date(2011, 6, 2),
        'href': 'http://www.elections.on.ca/en-CA/Tools/ElectoralDistricts/Shapefile.htm',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://www.elections.on.ca/en-CA/Tools/ElectoralDistricts/LimitedUseDataProductLicenceAgreement.htm',
        'data': 'http://www.elections.on.ca/NR/rdonlyres/C34F1D43-8086-46EC-A013-C0EF42A8CC09/0/EO_107ED_2011_06_02.zip',
    },
    'Prince Edward Island Electoral Districts': {
        'file': 'pe/ed/',
        'singular': 'Prince Edward Island Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['Name']),
        'namer': utils.simple_namer(['Descriptio']),
        'authority': 'Elections Prince Edward Island',
        'domain': 'Prince Edward Island',
        'last_updated': date(2011, 12, 12),
        'href': 'http://www.electionspei.ca/provincial/districts',
        #'href': 'http://www.gov.pe.ca/gis/index.php3?number=77868&lang=E',
        'notes': "The shapefile from gov.pe.ca has 222 features instead of 27. We use the KML from Elections PEI, which we convert with the command: ogr2ogr -f 'ESRI Shapefile' pei-provincial-districts-all pei-provincial-districts-all.kml",
        'encoding': 'iso-8859-1',
        'srid': '',
        'license': '',
        #'licence': 'http://www.gov.pe.ca/gis/license_agreement.php3',
        'data': 'http://www.electionspei.ca/provincial/details/gis/kml/pei-provincial-districts-all.kml',
        #'data': 'http://www.gov.pe.ca/photos/original/prov_elect_dist.SHP.zip',
    },
    'Quebec Electoral Districts': {
        'file': 'qc/ed/',
        'singular': 'Quebec Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['CO_CEP']),
        'namer': utils.simple_namer(['NM_CEP']),
        'authority': 'Directeur général des élections du Québec',
        'domain': 'Québec',
        'last_updated': date(2009, 5, 14),
        'href': 'http://www.electionsquebec.qc.ca/francais/provincial/carte-electorale/geometrie-des-circonscriptions-provinciales-du-quebec.php',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://www.electionsquebec.qc.ca/francais/conditions-d-utilisation-de-notre-site-web.php',
        'data': 'http://www.electionsquebec.qc.ca/documents/zip/shapefile-circonscriptions-electorales-2001-elections-generales-2008.zip',
    },
    'Saskatchewan Electoral Districts': {
        'file': 'sk/ed/',
        'singular': 'Saskatchewan Electoral District',
        'kind_first': False,
        'ider': utils.simple_namer(['CON_NUM']),
        'namer': utils.simple_namer(['CON_NAME']),
        'authority': 'Elections Saskatchewan',
        'domain': 'Saskatchewan',
        'last_updated': date(2010, 9, 29),
        'href': 'https://www.geosask.ca/Portal/ptk',
        'notes': """The zip file contains 58 shapefiles, one for each electoral district. Merge them using this command: for i in $(ls *.shp); do ogr2ogr -f 'ESRI Shapefile' -update -append SK_ED $i -nln SK_ED; echo "Merging $i";done""",
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': '',
        'data': 'ftp://portaldata:freedata@ftp.isc.ca/PackagedData/ElectionsSask/Boundaries.zip',
    },
# TERRITORIES
# CITIES
    #'Calgary Wards': {
    #    'file': 'ab/calgary/ed/',
    #    'singular': 'Calgary Ward',
    #    'kind_first': False,
    #    'ider': utils.simple_namer(['']),
    #    'namer': utils.simple_namer(['']),
    #    'authority': '',
    #    'domain': '',
    #    'last_updated': date(, , ),
    #    'href': '',
    #    'notes': '',
    #    'encoding': 'iso-8859-1',
    #    'srid': '',
    #    'licence': '',
    #    'data': '',
    #},
    #'Edmonton Wards': {
    #    'file': 'ab/edmonton/ed/',
    #    'singular': 'Edmonton Ward',
    #    'kind_first': False,
    #    'ider': utils.simple_namer(['']),
    #    'namer': utils.simple_namer(['']),
    #    'authority': '',
    #    'domain': '',
    #    'last_updated': date(, , ),
    #    'href': '',
    #    'notes': '',
    #    'encoding': 'iso-8859-1',
    #    'srid': '',
    #    'licence': 'http://www.edmonton.ca/city_government/open_data/open-data-terms-of-use.aspx',
    #    'data': '',
    #},
    #'London Wards': {
    #    'file': 'on/london/ed/',
    #    'singular': 'London Ward',
    #    'kind_first': False,
    #    'ider': utils.simple_namer(['']),
    #    'namer': utils.simple_namer(['']),
    #    'authority': '',
    #    'domain': '',
    #    'last_updated': date(, , ),
    #    'href': 'http://www.london.ca/d.aspx?s=/Open_Data/Data_Catalogue.htm',
    #    'notes': '',
    #    'encoding': 'iso-8859-1',
    #    'srid': '',
    #    'licence': 'http://www.london.ca/d.aspx?s=/Open_Data/Open_Data_Terms_Use.htm',
    #    'data': '',
    #},
    'Mississauga Wards': {
        'file': 'on/mississauga/ed/',
        'singular': 'Mississauga Ward',
        'kind_first': False,
        'ider': utils.simple_namer(['Name']),
        'namer': utils.simple_namer(['Name']),
        'authority': 'City of Mississauga',
        'domain': 'Mississauga, ON',
        'last_updated': date(2011, 12, 13),
        'href': 'http://www.mississauga.ca/portal/residents/publicationsopendatacatalogue',
        'notes': "Convert the KMZ with this command: unzip G_5_Municipal_Wards.kmz; ogr2ogr -f 'ESRI Shapefile' G_5_Municipal_Wards doc.kml",
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://www.mississauga.ca/file/COM/CityOfMississaugaTermsOfUse.pdf',
        'data': 'http://www5.mississauga.ca/research_catalogue/G_5_Municipal_Wards.kmz',
    },
    'Montreal Boroughs': {
        'file': 'qc/montreal/ed/',
        'singular': 'Montreal Boroughs',
        'kind_first': False,
        'ider': utils.index_namer('montreal'),
        'namer': utils.simple_namer(['ARROND']),
        'authority': 'Ville de Montréal',
        'domain': 'Montréal, QC',
        'last_updated': date(2011, 11, 8),
        'href': 'http://donnees.ville.montreal.qc.ca/archives/fiche-donnees/polygones-arrondissements',
        'notes': 'Ahuntsic-Cartierville is split into two features. It is preferable to merge them (using Quantum GIS for example).',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://donnees.ville.montreal.qc.ca/licence',
        'data': 'http://depot.ville.montreal.qc.ca/polygones-arrondissements/data.zip',
    },
    'Ottawa Wards': {
        'file': 'on/ottawa/ed/',
        'singular': 'Ottawa Ward',
        'kind_first': False,
        'ider': utils.simple_namer(['WARD_NUM']),
        'namer': utils.simple_namer(['WARD_EN']),
        'authority': 'City of Ottawa',
        'domain': 'Ottawa, ON',
        'last_updated': date(2010, 8, 27),
        'href': 'http://ottawa.ca/online_services/opendata/info/wards2010_en.html',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://ottawa.ca/online_services/opendata/terms_en.html',
        'data': 'http://ottawa.ca/online_services/opendata/data/wards2010.zip',
    },
    'Toronto Wards': {
        'file': 'on/toronto/ed/',
        'singular': 'Toronto Ward',
        'kind_first': False,
        'ider': utils.simple_namer(['SCODE_NAME']),
        'namer': utils.simple_namer(['NAME']),
        'authority': 'City of Toronto',
        'domain': 'Toronto, ON',
        'last_updated': date(2010, 6, 3),
        'href': 'http://www1.toronto.ca/wps/portal/open_data/open_data_item_details?vgnextoid=b1533f0aacaaa210VgnVCM1000006cd60f89RCRD&vgnextchannel=6e886aa8cc819210VgnVCM10000067d60f89RCRD',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://www1.toronto.ca/wps/portal/open_data/open_data_fact_sheet_details?vgnextoid=59986aa8cc819210VgnVCM10000067d60f89RCRD',
        'data': 'http://www1.toronto.ca/City_Of_Toronto/Information_Technology/Open_Data/Data_Sets/Assets/Files/wards_may2010_wgs84.zip',
    },
    'Windsor Wards': {
        'file': 'on/windsor/ed/',
        'singular': 'Windsor Ward',
        'kind_first': False,
        'ider': utils.index_namer(['windsor']),
        'namer': utils.simple_namer(['WARD']),
        'authority': 'City of Windsor',
        'domain': 'Windsor, ON',
        'last_updated': date(2010, 10, 27),
        'href': 'http://www.citywindsor.ca/003713.asp',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': 'http://www.citywindsor.ca/DataCatalogue/PDF/OpenDataTermsofUse.pdf',
        'data': 'http://www.citywindsor.ca/DataCatalogue/SHP/2010_Municipal_Ward_Boundaries.zip',
    },
}
"""
    '': {
        'file': '',
        'singular': '',
        'kind_first': False,
        'ider': utils.simple_namer(['']),
        'namer': utils.simple_namer(['']),
        'authority': '',
        'domain': '',
        'last_updated': date(, , ),
        'href': '',
        'notes': '',
        'encoding': 'iso-8859-1',
        'srid': '',
        'licence': '',
        'data': '',
    },
"""