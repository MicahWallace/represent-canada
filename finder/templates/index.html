{% extends 'base.html' %}
{% load compress %}

{% block title %}Represent | elected officials and electoral districts database{% endblock %}

{% block content %}
<header class="container">
  <h1>
    Represent, by
    <a href="http://opennorth.ca/"><img src="{{ STATIC_URL }}img/opennorth_logo.png" alt="" width="90" height="90"></a>
    <a href="http://opennorth.ca/">Open North</a>
  </h1>
</header>

<div class="container">
  <div id="form" class="form-inline">
    <h2>Enter a Canadian address or postal code to find your elected representatives</h2>
    <input type="text" name="address" id="address" class="span4" placeholder="Address or postal code">
    <a href="#" id="submit" class="btn large primary">
      <i class="icon-search"></i>
      Find
    </a>
  </div>

  <div id="notice" class="alert alert-info">
    Use our <b>free API</b> and open-source code in your own projects!
    <a href="{% url apidoc %}">Get started.</a>
  </div>

  <div class="row">
    <div class="span6">
      <div id="map"></div>
    </div>
    <div class="span6">
      <select id="addresses"></select>
      <table id="boundaries"></table>
    </div>
  </div>

  <hr class="soften">

  <div id="coverage">
    <h2>Geographic Coverage</h2>

    {% for category, boundary_sets in categories %}
      {% if boundary_sets %}
        <h3>{{ category }}</h3>
        <ul>
          {% for boundary_set in boundary_sets %}
            <li>
              <a href="/boundaries/{{ boundary_set.slug }}/?format=apibrowser">{{ boundary_set.name }}</a>
              {% if boundary_set.representative_set %}
                with members of <a href="/representatives/{{ boundary_set.representative_set.slug }}/?format=apibrowser">{{ boundary_set.representative_set.name }}</a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endfor %}
  </div>

  <hr class="soften">

  <div id="grid">
    <div class="row">
      <div class="span3">
        <h2>Free API</h2>
        <p>Read the <a href="{% url apidoc %}">documentation</a>.</p>
      </div>
      <div class="span3">
        <h2>Open-source</h2>
        <p>Built for and by the open-government community via <a href="https://github.com/opennorth/represent-canada">GitHub</a>.</p>
      </div>
      <div class="span3">
        <h2>Stay up-to-date</h2>
        <p>Subscribe to our <a href="http://groups.google.com/group/represent-canada/">low-volume mailing list</a> to be notified of API changes.</p>
      </div>
      <div class="span3">
        <h2>Contact us</h2>
        <p><a href="mailto:represent@opennorth.ca">represent@opennorth.ca</a></p>
      </div>
    </div>

    <hr class="soften">

    <div class="row">
      <div class="span2">
        <h2>Authors</h2>
        <p><a href="http://michaelmulley.com/">Michael Mulley</a> and <a href="http://opennorth.ca/team/">James McKinney</a></p>
      </div>
      <div class="span5">
        <h2>Scrapers</h2>
        <p>Arlo Breault, Carmine Casciato, Andrew Dyck, Rory Geoghegan, Trevor Knight, Matthew Leon, Camilo Lopez, Dylan McCall, Amir Pakdel and Kamil Politowicz.</p>
      </div>
      <div class="span5">
        <h2>Special thanks</h2>
        <p>Kent Mewhort for legal information, Aran Rasmussen for general help, and the Chicago Tribune&rsquo;s <a href="https://github.com/newsapps/django-boundaryservice">Boundary Service</a> for code and inspiration.</p>
      </div>
    </div>
  </div>

</div>
{% endblock %}

{% block js %}
<script src="//maps.google.com/maps/api/js?sensor=true"></script>
{{ block.super }}
<script type="text/javascript">
{# https://github.com/CloudMade/Leaflet/issues/323 #}
L_ROOT_URL = "{{ STATIC_URL|escapejs }}leaflet/";
</script>
{% compress js %}
<script type="text/javascript" src="{{ STATIC_URL }}js/store.min.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}leaflet/leaflet.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/index.js"></script>
{% endcompress %}
{% endblock %}
